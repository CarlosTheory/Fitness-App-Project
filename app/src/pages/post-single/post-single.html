<!--
  Generated template for the PostSinglePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="orange">
    <ion-title>Post</ion-title>
  </ion-navbar>

</ion-header>


<ion-content #content padding>
	  <div *ngIf="postData">
      <ion-card>

          <ion-item>
            <div class="profile-pic-box" [ngStyle]="{'background-image':'url('+URL_SERVER+'assets/uploads/'+postData.user.avatar+')'}">
            </div>
            <h2>{{ postData.user.username }}</h2>
            <p>{{ postData.created_at | date }}</p>
          </ion-item>
          <ion-item>
              <p class="post-title">{{postData.title}}</p><br>
              <span class="post-category" *ngIf="postData.categories[0]">â†’{{ postData.categories[0].name }}</span>
              <img *ngIf="postData.media[0]" src="{{URL_SERVER}}assets/uploads/{{postData.media[0].name}}">
          </ion-item>
          
        
          <ion-card-content>
            <p>{{ postData.body}}</p>
          </ion-card-content>
          <ion-row>
            <ion-col>
              <ion-icon class="comments-icon" name="chatbubbles"></ion-icon>{{ " "+numberOfComments+" "+numberOfCommentsString }} 
            </ion-col>
          </ion-row>

            <ion-textarea maxLength="500" placeholder="Escribe aqui..." [(ngModel)]="userComment"></ion-textarea>
            <ion-item>
              <button ion-button item-end (click)="addComment()">Enviar</button>
            </ion-item>

        </ion-card>

                <ion-list #Comments *ngFor="let comment of postData.comments">
                      <ion-row>
                        <ion-col col-2>
                          <div class="profile-pic-box-comment" [ngStyle]="{'background-image':'url('+URL_SERVER+'assets/uploads/'+comment.user.avatar +')'}">
                           </div>
                        </ion-col>
                        <ion-col #Comment col-10>
                          <div><strong>{{ comment.user.username }}</strong> {{ comment.created_at | date }}</div>
                          <p>{{ comment.body }}</p>
                        </ion-col>
                      </ion-row>
                  </ion-list>
    </div>
</ion-content>
